(function(t){function e(e){for(var n,i,c=e[0],s=e[1],u=e[2],l=0,m=[];l<c.length;l++)i=c[l],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&m.push(a[i][0]),a[i]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n]);d&&d(e);while(m.length)m.shift()();return o.push.apply(o,u||[]),r()}function r(){for(var t,e=0;e<o.length;e++){for(var r=o[e],n=!0,i=1;i<r.length;i++){var s=r[i];0!==a[s]&&(n=!1)}n&&(o.splice(e--,1),t=c(c.s=r[0]))}return t}var n={},a={app:0},o=[];function i(t){return c.p+"js/"+({about:"about"}[t]||t)+"."+{about:"61700f19"}[t]+".js"}function c(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,c),r.l=!0,r.exports}c.e=function(t){var e=[],r=a[t];if(0!==r)if(r)e.push(r[2]);else{var n=new Promise((function(e,n){r=a[t]=[e,n]}));e.push(r[2]=n);var o,s=document.createElement("script");s.charset="utf-8",s.timeout=120,c.nc&&s.setAttribute("nonce",c.nc),s.src=i(t);var u=new Error;o=function(e){s.onerror=s.onload=null,clearTimeout(l);var r=a[t];if(0!==r){if(r){var n=e&&("load"===e.type?"missing":e.type),o=e&&e.target&&e.target.src;u.message="Loading chunk "+t+" failed.\n("+n+": "+o+")",u.name="ChunkLoadError",u.type=n,u.request=o,r[1](u)}a[t]=void 0}};var l=setTimeout((function(){o({type:"timeout",target:s})}),12e4);s.onerror=s.onload=o,document.head.appendChild(s)}return Promise.all(e)},c.m=t,c.c=n,c.d=function(t,e,r){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(c.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)c.d(r,n,function(e){return t[e]}.bind(null,n));return r},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/",c.oe=function(t){throw console.error(t),t};var s=window["webpackJsonp"]=window["webpackJsonp"]||[],u=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var d=u;o.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},4360:function(t,e,r){"use strict";var n=r("2b0e"),a=r("2f62"),o=(r("96cf"),r("1da1")),i=r("bc3a"),c=r.n(i),s={namespaced:!0,state:{token:null,user:null},getters:{authenticated:function(t){return t.token&&t.user},user:function(t){return t.user},getToken:function(t){return t.token}},mutations:{SET_TOKEN:function(t,e){t.token=e},SET_USER:function(t,e){t.user=e}},actions:{signin:function(t,e){return Object(o["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=t.dispatch,r.next=3,c.a.post("login",e);case 3:return a=r.sent,r.abrupt("return",n("attempt",a.data));case 5:case"end":return r.stop()}}),r)})))()},signup:function(t,e){return Object(o["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=t.dispatch,r.next=3,c.a.post("register",e);case 3:return a=r.sent,r.abrupt("return",n("attempt",a.data));case 5:case"end":return r.stop()}}),r)})))()},attempt:function(t,e){return Object(o["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:n=t.commit,n("SET_TOKEN",e.token),n("SET_USER",e.user);case 3:case"end":return r.stop()}}),r)})))()},set_token:function(t,e){return Object(o["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:n=t.commit,n("SET_TOKEN",e);case 2:case"end":return r.stop()}}),r)})))()},signOut:function(t){var e=t.commit;return c.a.post("/logout").then((function(t){e("SET_TOKEN",data.token),e("SET_USER",data.user)}))}}},u=(r("a4d3"),r("e01a"),r("d81d"),r("a434"),{namespaced:!0,state:{products:[]},getters:{get_products:function(t){return t.products}},mutations:{SET_PRODUCTs:function(t,e){t.products=e},ADD_PRODUCT:function(t,e){t.products.push(e)},DELETE_PRODUCT:function(t,e){t.products.map((function(r,n){r.id==e&&t.products.splice(n,1)}))},EDIT_PRODUCT:function(t,e){t.products.map((function(t){t.id==e.id&&(t.title=e.title,t.description=e.description,t.price=e.price,t.image=e.image)}))}},actions:{getProducts:function(t){return Object(o["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.dispatch,e.next=3,c.a.get("product").then((function(t){r("attempt",t.data)})).catch((function(t){console.log("error"+t)}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))()},attempt:function(t,e){return Object(o["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:n=t.commit,n("SET_PRODUCTs",e);case 2:case"end":return r.stop()}}),r)})))()},addProduct:function(t,e){return Object(o["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=t.commit,r.next=3,c.a.post("product",e);case 3:return a=r.sent,console.log(a.data),r.abrupt("return",n("ADD_PRODUCT",a.data));case 6:case"end":return r.stop()}}),r)})))()},deleteProduct:function(t,e){return Object(o["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=t.commit,r.next=3,c.a.delete("product/".concat(e));case 3:r.sent,n("DELETE_PRODUCT",e);case 5:case"end":return r.stop()}}),r)})))()},editProduct:function(t,e){return Object(o["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=t.commit,r.next=3,c.a.patch("product/".concat(e.id),e);case 3:a=r.sent,console.log(a.data),n("EDIT_PRODUCT",a.data);case 6:case"end":return r.stop()}}),r)})))()}}});n["default"].use(a["a"]);e["a"]=new a["a"].Store({state:{},mutations:{},actions:{},modules:{auth:s,product:u}})},"56d7":function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d"),r("0cdd");var n=r("2b0e"),a=r("5f5b");r("ab8b"),r("2dd8");n["default"].use(a["a"]);var o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("router-view")],1)},i=[],c=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ul",[r("li",[r("router-link",{attrs:{to:"/"}},[t._v(" Home ")])],1),t.user?r("li",[t._v(t._s(t.user.name))]):t._e(),r("li",[r("router-link",{attrs:{to:"dashboard"}},[t._v(" Dashboard ")])],1),t._m(0),r("li",[r("router-link",{attrs:{to:"signin"}},[t._v(" Signin ")])],1)])},s=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("li",[r("a",{attrs:{href:"#"}},[t._v(" Signout ")])])}],u=r("5530"),l=r("2f62"),d={computed:Object(u["a"])({},Object(l["c"])({authenticated:"auth/authenticated",user:"auth/user"}))},m=d,p=r("2877"),f=Object(p["a"])(m,c,s,!1,null,null,null),b=f.exports,h={components:{Navigation:b}},g=h,v=Object(p["a"])(g,o,i,!1,null,null,null),w=v.exports,k=(r("d3b7"),r("8c4f")),_=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-container",{attrs:{fluid:""}},[r("b-row",[r("b-col",[r("h1",[t._v("Home")])])],1)],1)},O=[],x={name:"Home",components:{}},y=x,j=Object(p["a"])(y,_,O,!1,null,null,null),E=(j.exports,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-container",[r("b-row",[r("b-col",[r("h1",[t._v("Signin")])])],1),r("b-row",[r("b-col",{attrs:{cols:"4"}},[r("b-form",{on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[r("b-form-input",{staticClass:"mb-2",attrs:{type:"email",placeholder:"Email"},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}}),r("b-form-input",{staticClass:"mb-2 ",attrs:{type:"password",placeholder:"Password"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}}),r("b-button",{attrs:{type:"submit",variant:"primary"}},[t._v("Login")]),r("router-link",{staticClass:"mx-3",attrs:{to:"/signup"}},[t._v("Register")])],1)],1)],1)],1)}),S=[],P=(r("ac1f"),r("5319"),{name:"signin",components:{},data:function(){return{form:{email:"",password:""}}},methods:Object(u["a"])(Object(u["a"])({},Object(l["b"])("auth",["signin"])),{},{submit:function(){var t=this;this.signin(this.form).then((function(){t.$router.replace("dashboard")})).catch((function(){console.log("faild")}))}})}),R=P,T=Object(p["a"])(R,E,S,!1,null,null,null),C=T.exports,D=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-container",[r("b-row",[r("b-col",[r("h1",[t._v("Signup")])])],1),r("b-row",[r("b-col",{attrs:{cols:"4"}},[r("b-form",{on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[r("b-form-input",{staticClass:"mb-2",attrs:{type:"text",placeholder:"Name"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}}),r("b-form-input",{staticClass:"mb-2",attrs:{type:"email",placeholder:"Email"},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}}),r("b-form-input",{staticClass:"mb-2 ",attrs:{type:"password",placeholder:"Password"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}}),r("b-button",{attrs:{type:"submit",variant:"primary"}},[t._v("register")]),r("router-link",{staticClass:"mx-3",attrs:{to:"signin"}},[t._v("Login")])],1)],1)],1)],1)},$=[],M={name:"signup",components:{},data:function(){return{form:{name:"",email:"",password:""}}},methods:Object(u["a"])(Object(u["a"])({},Object(l["b"])("auth",["signup"])),{},{submit:function(){var t=this;this.signup(this.form).then((function(){t.$router.replace("dashboard")})).catch((function(){console.log("faild")}))}})},U=M,N=Object(p["a"])(U,D,$,!1,null,null,null),L=N.exports,A=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-container",[r("b-row",[r("b-col",[r("h1",[t._v("Product")]),r("b-button",{staticClass:"float-right",attrs:{variant:"danger"},on:{click:t.logout}},[t._v("Logout")])],1)],1),r("b-row",t._l(t.products,(function(e,n){return r("b-col",{key:n,attrs:{cols:"3"}},[r("b-card",{staticClass:"mb-2",attrs:{footer:"Price "+e.price},scopedSlots:t._u([{key:"header",fn:function(){return[t._v(" "+t._s(e.title)+" "),r("b-button",{staticClass:"float-right",attrs:{variant:"danger",size:"sm"},on:{click:function(r){return t.deleteClick(e.id)}}},[t._v(" D ")]),r("b-button",{staticClass:"float-right mx-2",attrs:{variant:"warning",size:"sm"},on:{click:function(r){return t.editClick(e)}}},[t._v(" E ")])]},proxy:!0}],null,!0)},[r("b-card-title",{attrs:{title:e.title}}),r("b-card-text",[r("b-row",[r("b-col",[r("b-img",{attrs:{src:"https://products-backend-api.herokuapp.com/"+e.image,fluid:"",alt:"Responsive image"}})],1),r("b-col",[t._v(" "+t._s(e.description)+" ")])],1)],1)],1)],1)})),1),r("div",{staticClass:"d-flex  float-right"},[r("b-button",{staticClass:"add-button",attrs:{pill:"",variant:"primary"},on:{click:t.addButtonClick}},[t._v("Add new")])],1),r("b-modal",{ref:"modal",attrs:{id:"modal-prevent-closing",title:t.saveModal?"Create Product":"Edit product"},on:{show:t.resetModal,hidden:t.resetModal,ok:t.handleOk}},[r("form",{ref:"form",on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.handleSubmit(e)}}},[r("b-form-group",{attrs:{state:t.nameState,"label-for":"name-input","invalid-feedback":"Name is required"}},[r("b-form-input",{attrs:{id:"name-input",required:"",placeholder:"Title"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),r("b-form-group",{attrs:{state:t.nameState,"label-for":"name-input","invalid-feedback":"Name is required"}},[r("b-form-textarea",{attrs:{id:"name-input",state:t.nameState,required:"",placeholder:"Description"},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1),r("b-row",[r("b-col",[r("b-form-file",{staticClass:"my-3",attrs:{plain:""},on:{change:t.getImage}})],1),t.saveModal?t._e():r("b-col",[r("b-img",{attrs:{src:"https://products-backend-api.herokuapp.com/"+t.form.image,fluid:"",alt:"Responsive image"}})],1)],1),r("b-form-group",{attrs:{state:t.nameState,"label-for":"name-input","invalid-feedback":"Name is required"}},[r("b-form-input",{attrs:{id:"name-input",state:t.nameState,type:"number",required:"",placeholder:"Price"},model:{value:t.form.price,callback:function(e){t.$set(t.form,"price",e)},expression:"form.price"}})],1)],1)])],1)},q=[],I=(r("a4d3"),r("e01a"),r("b0c0"),r("bc3a")),z=r.n(I),K={name:"dashboard",components:{},data:function(){return{name:"",nameState:"null",submittedNames:[],form:{id:"",title:"",description:"",price:"",image:null},saveModal:!0}},methods:Object(u["a"])(Object(u["a"])(Object(u["a"])({},Object(l["b"])("product",["getProducts","addProduct","deleteProduct","editProduct"])),Object(l["b"])("auth",["signOut"])),{},{checkFormValidity:function(){var t=this.$refs.form.checkValidity();return this.nameState=t,t},resetModal:function(){this.name="",this.nameState=null},handleOk:function(t){t.preventDefault(),this.handleSubmit()},handleSubmit:function(){var t=this;this.saveModal?this.addProduct(this.form).then((function(){t.$bvModal.hide("modal-prevent-closing"),t.form.title="",t.form.description="",t.form.price=""})):this.editProduct(this.form).then((function(){t.$bvModal.hide("modal-prevent-closing"),t.form.title="",t.form.description="",t.form.price=""}))},deleteClick:function(t){this.deleteProduct(t)},editClick:function(t){this.saveModal=!1,this.form.id=t.id,this.form.title=t.title,this.form.description=t.description,this.form.price=t.price,this.form.image=t.image,this.$bvModal.show("modal-prevent-closing")},addButtonClick:function(){this.form.title="",this.form.description="",this.form.price="",this.$bvModal.show("modal-prevent-closing"),this.saveModal=!0},getImage:function(t){var e=this,r=t.target.files[0];if(r.size<=10111775){var n=new FileReader;n.onloadend=function(){e.form.image=n.result},n.readAsDataURL(r)}else alert("file is too larze")},logout:function(){var t=this;this.signOut().then((function(){t.$router.replace("/signin")})).catch((function(){t.$router.replace("/signin")}))}}),mounted:function(){this.getProducts()},computed:Object(u["a"])({},Object(l["c"])({products:"product/get_products"}))},H=K,B=(r("6423"),Object(p["a"])(H,A,q,!1,null,"75c41665",null)),F=B.exports,J=r("4360");n["default"].use(k["a"]);var V=[{path:"/",name:"Home",component:C},{path:"/signin",name:"Signin",component:C},{path:"/signup",name:"Signup",component:L},{path:"/dashboard",name:"Dashboard",component:F,beforeEnter:function(t,e,r){J["a"].getters["auth/getToken"]||r({name:"Signin"}),r()}},{path:"/about",name:"About",component:function(){return r.e("about").then(r.bind(null,"f820"))}}],G=new k["a"]({mode:"history",base:"/",routes:V}),Q=G;r("66c6"),z.a.defaults.baseURL="https://products-backend-api.herokuapp.com/api",J["a"].dispatch("auth/set_token",localStorage.getItem("token")),n["default"].config.productionTip=!1,new n["default"]({router:Q,store:J["a"],render:function(t){return t(w)}}).$mount("#app")},6423:function(t,e,r){"use strict";r("cf1e")},"66c6":function(t,e,r){"use strict";r.r(e);var n=r("4360"),a=r("bc3a"),o=r.n(a);n["a"].subscribe((function(t){switch(t.type){case"auth/SET_TOKEN":t.type?(o.a.defaults.headers.common["Authorization"]="Bearer ".concat(t.payload),localStorage.setItem("token",t.payload)):(o.a.defaults.headers.common["Authorization"]=null,localStorage.removeItem("token"));break}}))},cf1e:function(t,e,r){}});
//# sourceMappingURL=app.7ca48708.js.map